title: "Ribo-seq"
subtitle: "Analysis results summary"
intro_text: False
report_comment: >
    This report has been generated by the <a href="https://github.com/iraiosub/riboseq" target="_blank">iraiosub/riboseq</a>
    analysis pipeline. For information about how to interpret these results, please see the
    <a href="https://github.com/iraiosub/riboseq" target="_blank">documentation</a>.
report_header_info:
  - Contact E-mail: "ira.iosub@crick.ac.uk"
  - Application Type: "Ribo-seq"

exclude_modules:
    - 'general_stats'

# Other MultiQC config stuff here
custom_data:
  order:
    - length_filter
    - mapping
    - starting_length
    - useful_length
    - pca
    - riboseq_qc
    - frame
    - region
    - ribocutter
  frame_counts:
    parent_id: riboseq_qc
    parent_name: "Ribo-seq QC"
    parent_description: "This section contains various Ribo-seq quality control metrics."
    file_format: "tsv"
    section_name: "Frame distribution"
    description: "Frame distribution for 5' ends of reads in the expected length range."
    plot_type: "heatmap"
    pconfig:
      id: "frame_counts_heatmap"
      title: "Frame"
      xcats_samples: False
  starting_length:
    parent_id: read_length
    parent_name: "Read Length"
    file_format: "tsv"
    section_name: "Input Read Length Distribution"
    description: "Length distribution for input reads (reads kept and analysed after filtering based on length). Unless the minimum length has been specified, reads shorter than 20 nt have been discarded and not inluded in this plot."
    plot_type: "linegraph"
    pconfig:
      id: "starting_length_linegraph"
      title: "Input Read Length Distribution"
      xlab: Length (nt)
      ylab: Frequency
      yDecimals: False
      color: '#1b9e77'
      logswitch: True
  useful_length:
    parent_id: read_length
    parent_name: "Read Length"
    file_format: "tsv"
    section_name: "Useful Read Length Distribution"
    description: "Length distribution for reads that uniquely map to protein-coding transcripts (useful reads)."
    plot_type: "linegraph"
    pconfig:
      id: "useful_length_linegraph"
      title: "Read Length Distribution"
      xlab: Length (nt)
      ylab: Frequency
      yDecimals: False
      logswitch: True
      color: '#1b9e77'
  region_counts:
    parent_id: riboseq_qc
    parent_name: "Ribo-seq QC"
    parent_description: "This section contains various Ribo-seq quality control metrics."
    file_format: "tsv"
    section_name: "Regions"
    description: "Distribution of 5'ends of the reads mapped uniquely to protein-coding transcripts reads across UTR and CDS regions."
    plot_type: "bargraph"
    pconfig:
      id: "region_counts_barplot"
      title: "Regions"
      cpswitch: True
  start_dist:
    parent_id: riboseq_qc
    parent_name: "Ribo-seq QC"
    parent_description: "This section contains various Ribo-seq quality control metrics."
    file_format: "tsv"
    section_name: "Distance from START codon"
    description: "Metaprofile of 5'ends of useful reads of expected length around start codons. Unless specified, the expected read length range is between 26 and 32 nt."
    plot_type: "linegraph"
    pconfig:
      id: "start_dist_linegraph"
      title: "Distance from START codon"
      xlab: Distance from START codon (nt)
      ylab: Count
      yDecimals: False
      color: '#d95f02'
  pcoding_percentage:
    parent_id: riboseq_qc
    parent_name: "Ribo-seq QC"
    parent_description: "This section contains various Ribo-seq quality control metrics."
    file_format: "tsv"
    section_name: "Protein-coding Genes Mapping Percentage"
    description: "Percentage of reads mapping uniquely to protein-coding transcripts (useful reads). This is the proprtion of reads of the entire library that are useful for most downstream analyses. For each gene, a single representative transcript was used (by default, the one with the longest CDS was used). The higher the percentage, the better."
    plot_type: "bargraph"
    pconfig:
      id: "pcoding_percentage_barplot"
      title: "Reads mapping to protein-coding transcripts"
      ylab: "Percentage (%)"
      xmax: 100
      xmin: 0
      cpswitch: False
      stacking: null
      tt_percentages: False
      use_legend: False
      tt_suffix: '%'
      tt_decimals': 1
  expected_length:
    parent_id: riboseq_qc
    parent_name: "Ribo-seq QC"
    parent_description: "This section contains various Ribo-seq quality control metrics, summarised across all samples. More detailed QC metrics regarding the quality of the Ribo-seq data can be found in the sample-specific reports."
    file_format: "tsv"
    section_name: "Expected Read Length Percentage"
    description: "Percentage of uniquely mapping reads to protein-coding transcripts (useful reads) of expected length. The higher the percentage, the better. Unless specified, the expected read length range is between 26 and 32 nt."
    plot_type: "bargraph"
    pconfig:
      id: "expected_length_barplot"
      title: "Reads of expected length"
      ylab: "Percentage (%)"
      xmax: 100
      xmin: 0
      cpswitch: False
      stacking: null
      tt_percentages: False
      use_legend: False
      tt_suffix: '%'
  duplication:
    parent_id: riboseq_qc
    parent_name: "Ribo-seq QC"
    parent_description: "This section contains various Ribo-seq quality control metrics."
    file_format: "tsv"
    section_name: "Duplication"
    description: "Percentage of duplicated reads of expected length based on UMIs. Unless specified, the expected read length range is between 26 and 32 nt."
    plot_type: "bargraph"
    use_legend: False
    pconfig:
      id: "duplication_barplot"
      title: "Duplication"
      ylab: "Percentage (%)"
      xmax: 100
      xmin: 0
      cpswitch: False
      stacking: null
      tt_percentages: False
  ribocutter:
    parent_id: ribocutter
    parent_name: "Ribocutter"
    file_format: "tsv"
    section_name: "Ribocutter"
    description: "Percentage of reads targeted by guides designed by Ribocutter (50 guides by default) using two different read length thresholds. The higher the proportion targeted, the better."
    plot_type: "bargraph"
    pconfig:
      id: "ribocutter_barplot"
      title: "Ribocutter: proportion of reads targeted"
      ylab: "Percentage reads targeted (%)"
      xmax: 100
      xmin: 0
      cpswitch: False
      stacking: null
  mapping_counts:
    parent_id: mapping_counts
    parent_name: "Mapping"
    file_format: "tsv"
    section_name: "Mapping"
    description: "The mapping metrics for each experiment."
    plot_type: "bargraph"
    pconfig:
      id: "mapping_counts_barplot"
      title: "Mapping"
      cpswitch: True
  length_filter:
    parent_id: length_filter
    parent_name: "Read filtering"
    file_format: "tsv"
    section_name: "Read filtering"
    description: "The relative proportions of reads discarded and used as input for the analysis, based on the length threshold. If not specified, reads shorter than 20 nt are discarded. "
    plot_type: "bargraph"
    pconfig:
      id: "length_filter_counts_barplot"
      title: "Read filtering"
      cpswitch: True
  pca:
    parent_id: pca
    parent_name: "PCA"
    section_name: "PCA"
    description: "This plot shows the first two components from a principal component analysis on RPF counts from FeatureCounts and P-site counts on CDS."

sp:
  starting_length:
    fn: "starting_length_mqc.tsv"
  useful_length:
    fn: "useful_length_mqc.tsv"
  region_counts:
    fn: "region_counts_mqc.tsv"
  start_dist:
    fn: "start_dist_mqc.tsv"
  ribocutter:
    fn: "ribocutter_mqc.tsv"
  pca:
    fn: "pca_mqc.png"
  pcoding_percentage:
    fn: "pcoding_percentage_mqc.tsv"
  expected_length:
    fn: "expected_length_mqc.tsv"
  duplication:
    fn: "duplication_mqc.tsv"
  mapping_counts:
    fn: "mapping_counts_mqc.tsv"  
  length_filter:
    fn: "length_filter_mqc.tsv"  
  frame_counts:
    fn: "frame_counts_mqc.tsv"

module_order:
    - length_filter
    - mapping
    - read_length
    - pca
    - riboseq_qc
    - frame
    - region
    - ribocutter
    - fastqc
    - bowtie2
    - star

report_section_order:
  length_filter:
    order: 1001
  mapping:
    order: 1000
  star:
    order: -1000
  read_length:
    order: 999
  pca:
    order: 998
  riboseq_qc:
    order: 997
  frame:
    order: 996
  region:
    order: 995

export_plots: false